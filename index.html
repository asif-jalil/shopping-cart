<!DOCTYPE html>
<html>

   <head>
      <title>Shopping Cart</title>
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
      <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet" />
      <link href="style.css" rel="stylesheet">
   </head>

   <body>
      <section>
         <div class="container">
            <div class="cart">
               <div class="col-md-12 col-lg-10 mx-auto">
                  <div class="cart-item">
                     <div class="row">
                        <div class="col-md-7 center-item">
                           <img src="images/product-1.png" alt="">
                           <h5>iPhone 11 128GB Black</h5>
                        </div>

                        <div class="col-md-5 center-item">
                           <div class="input-group number-spinner">
                              <button id="btn-minus-1" class="btn btn-default"><i class="fas fa-minus"></i></button>
                              <input id="input-1" type="text" class="form-control text-center" value="1">
                              <button id="btn-plus-1" class="btn btn-default"><i class="fas fa-plus"></i></button>
                           </div>
                           <h5>$ <span id="price-1">1219</span></h5>
                           <img src="images/remove.png" alt="" class="remove-item">
                        </div>
                     </div>
                  </div>

                  <div class="cart-item">
                     <div class="row">
                        <div class="col-md-7 center-item mx-auto">
                           <img src="images/product-2.png" alt="">
                           <h5>iPhone 11 Silicone Case - Black</h5>
                        </div>
                        <div class="col-md-5 center-item">
                           <div class="input-group number-spinner">
                              <button id="btn-minus-2" class="btn btn-default"><i class="fas fa-minus"></i></button>
                              <input id="input-2" type="text" class="form-control text-center" value="1">
                              <button id="btn-plus-2" class="btn btn-default"><i class="fas fa-plus"></i></button>
                           </div>
                           <h5>$ <span id="price-2">59</span></h5>
                           <img src="images/remove.png" alt="" class="remove-item">
                        </div>
                     </div>
                  </div>

                  <div class="cart-item">
                     <div class="row">

                        <div class="col-md-8">
                           <h5>Subtotal: </h5>
                           <h5>Tax:</h5>
                           <h5>Total:</h5>
                        </div>

                        <div class="col-md-4 status">
                           <h5>$ <span id="subtotal"></span></h5>
                           <h5> <span id="tax"></span></h5>
                           <h5>$ <span id="total"></span></h5>
                        </div>
                     </div>
                  </div>
                  <div class="col-md-12 pt-4 pb-4">
                     <button type="button" class="btn btn-success check-out">Check Out</button>
                  </div>
               </div>
            </div>
         </div>
      </section>

      <script>
         const btnPlus1 = document.getElementById('btn-plus-1');
         const btnMinus1 = document.getElementById('btn-minus-1');
         const btnPlus2 = document.getElementById('btn-plus-2');
         const btnMinus2 = document.getElementById('btn-minus-2');
         const mainTax = 15;

         function increasing(button, inputNumber, price, priceInput) {
            enterEvent(inputNumber, button);
            button.addEventListener('click', function () {
               const inputField = document.getElementById(inputNumber);
               inputField.value++;
               calcSinglePrice(inputNumber, price, priceInput);
            })
         }

         function decreasing(button, inputNumber, price, priceInput) {
            enterEvent(inputNumber, button);
            button.addEventListener('click', function () {
               const inputField = document.getElementById(inputNumber);
               if (inputField.value > 0) {
                  inputField.value--;
               }
               calcSinglePrice(inputNumber, price, priceInput);
            })
         }

         function calcSinglePrice(inputNumber, price, priceInput) {
            let inputFieldValue = document.getElementById(inputNumber).value;
            const parsePerPrice = price;
            const perPrice = parseFloat(parsePerPrice);
            let singlePrice = inputFieldValue * perPrice;
            document.getElementById(priceInput).innerText = singlePrice;
            calcTotal('price-1', 'price-2', mainTax);
         }

         function enterEvent(fieldId, button) {
            const field = document.getElementById(fieldId)
            field.addEventListener('keyup', function (e) {
               if (e.keyCode === 13) {
                  button.click();
               }
            })
         }

         function calcTotal(price1, price2, taxInput) {
            const parsePerPrice1 = document.getElementById(price1).innerText;
            const perPrice1 = parseFloat(parsePerPrice1);
            const parsePerPrice2 = document.getElementById(price2).innerText;
            const perPrice2 = parseFloat(parsePerPrice2);
            const subtotal = perPrice1 + perPrice2;
            const tax = (subtotal * taxInput) / 100;
            let subtotalField = document.getElementById('subtotal');
            let taxField = document.getElementById('tax');
            let totalField = document.getElementById('total');
            subtotalField.innerText = perPrice1 + perPrice2;
            taxField.innerText = taxInput + '%';
            totalField.innerText = subtotal + tax;
         }

         increasing(btnPlus1, 'input-1', 1219, 'price-1');
         decreasing(btnMinus1, 'input-1', 1219, 'price-1');
         increasing(btnPlus2, 'input-2', 59, 'price-2');
         decreasing(btnMinus2, 'input-2', 59, 'price-2');
         calcTotal('price-1', 'price-2', mainTax);

      </script>
   </body>

</html>
